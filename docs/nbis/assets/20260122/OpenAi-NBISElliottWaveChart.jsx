import React, { useState, useMemo } from 'react';

// Full 1000 candle dataset: [timestamp, open, high, low, close, volume]
const D = [[1559914200,37.21,37.73,37.11,37.28,2008951],[1560173400,37.47,38.0,37.34,37.77,1291281],[1560259800,38.15,39.18,38.15,38.32,3510934],[1560346200,38.36,38.48,37.78,38.31,1614121],[1560432600,38.64,38.93,38.42,38.85,1490623],[1560519000,38.6,38.73,37.85,37.95,1124401],[1560778200,38.5,38.6,38.14,38.36,639572],[1560864600,38.59,38.99,38.57,38.77,1213146],[1560951000,38.94,39.0,38.5,38.99,695171],[1561037400,39.53,39.97,39.21,39.42,1835210],[1561123800,39.0,39.31,38.81,39.02,1482302],[1561383000,39.26,39.28,38.85,39.09,939439],[1561469400,39.15,39.15,37.43,37.59,1600104],[1561555800,37.95,38.44,37.59,37.67,2019697],[1561642200,37.93,39.12,37.61,38.84,2917333],[1561728600,38.73,38.73,37.71,38.0,2511542],[1561987800,38.65,39.74,38.65,39.23,2138308],[1562074200,39.0,40.03,38.8,39.69,2485088],[1562160600,39.47,39.58,39.02,39.33,877995],[1562333400,39.06,39.24,38.51,39.2,2037122],[1562592600,39.02,39.09,38.45,38.72,969344],[1562679000,38.3,39.49,38.19,39.45,2220580],[1562765400,39.63,39.92,39.46,39.82,1190541],[1562851800,39.77,40.0,39.47,39.97,929229],[1562938200,40.24,41.02,40.17,40.33,2157725],[1563197400,40.64,40.92,40.44,40.48,2332842],[1563283800,40.6,40.67,40.0,40.27,1059259],[1563370200,40.28,40.5,39.52,39.57,923513],[1563456600,39.56,39.78,39.31,39.61,1174980],[1563543000,39.95,40.53,38.94,39.0,2112946],[1563802200,39.56,39.85,39.17,39.59,1764551],[1563888600,39.55,39.69,39.13,39.63,983343],[1563975000,39.62,40.1,39.32,39.99,1660808],[1564061400,39.9,39.9,38.26,38.41,4066999],[1564147800,40.31,42.37,35.84,37.04,14368363],[1564407000,38.74,39.35,37.59,39.34,6672461],[1564493400,39.7,39.7,38.53,38.87,3928074],[1564579800,39.0,39.47,38.6,39.22,2660334],[1564666200,38.97,40.08,38.16,38.25,3294738],[1564752600,38.29,38.33,37.26,37.54,2183881],[1565011800,37.0,37.12,36.13,36.34,2776691],[1565098200,37.03,37.42,36.65,37.1,1511003],[1565184600,36.67,37.31,36.48,36.54,2235136],[1565271000,37.15,37.4,36.84,37.36,1298706],[1565357400,37.0,37.18,36.67,36.96,1327528],[1565616600,36.82,36.9,36.23,36.27,889953],[1565703000,36.27,37.91,36.2,37.53,1849368],[1565789400,36.49,36.52,35.84,35.87,1393125],[1565875800,35.88,35.98,35.53,35.86,1715532],[1565962200,35.95,36.61,35.85,36.48,1186967],[1566221400,36.43,36.7,35.95,36.41,1719713],[1566307800,36.58,36.85,36.4,36.48,1176850],[1566394200,36.85,37.09,36.27,36.46,1833038],[1566480600,36.72,36.81,36.26,36.55,1200028],[1566567000,36.27,36.87,35.71,35.79,955776],[1566826200,36.32,36.42,36.05,36.15,596630],[1566912600,36.27,36.71,36.25,36.49,831519],[1566999000,36.27,36.66,36.01,36.21,861125],[1567085400,36.48,36.98,36.4,36.86,977045],[1567171800,37.07,37.17,36.74,37.1,964397],[1567517400,36.62,37.28,36.59,37.1,1934281],[1567603800,37.52,38.01,37.31,37.96,1129965],[1567690200,37.93,38.16,37.35,38.08,1389243],[1567776600,38.15,38.35,37.97,37.99,1400450],[1568035800,38.12,38.16,37.22,37.48,2367290],[1568122200,37.74,37.8,37.11,37.48,1566668],[1568208600,37.66,37.87,37.5,37.66,1032306],[1568295000,37.88,38.16,37.61,37.74,656673],[1568381400,38.09,38.15,37.76,37.88,773728],[1568640600,37.93,38.31,37.88,38.03,688200],[1568727000,38.12,38.12,37.56,37.68,1457745],[1568813400,37.96,38.14,37.03,37.33,2208218],[1568899800,37.76,37.85,37.26,37.44,1695613],[1568986200,37.51,37.61,35.77,35.77,4740818],[1569245400,36.28,36.73,36.02,36.59,3104563],[1569331800,36.72,36.74,35.74,36.01,2245791],[1569418200,35.91,36.67,35.42,36.48,1498864],[1569504600,36.34,36.43,36.0,36.17,1434109],[1569591000,36.18,36.19,35.09,35.26,1617739],[1569850200,35.3,35.31,34.62,35.01,3088692],[1569936600,35.28,35.59,34.74,34.76,3126173],[1570023000,34.67,34.71,33.97,34.03,3499558],[1570109400,34.24,35.03,33.81,34.93,2655015],[1570195800,35.05,35.41,34.92,35.36,2401254],[1570455000,35.25,35.45,35.12,35.28,1764295],[1570541400,34.96,35.57,34.9,35.4,6023375],[1570627800,35.62,35.86,35.47,35.66,1582796],[1570714200,35.58,36.11,35.48,35.56,2263539],[1570800600,31.74,32.63,28.91,29.99,34463316],[1571059800,31.0,31.62,30.25,30.3,7994256],[1571146200,30.9,31.13,30.32,30.52,7040414],[1571232600,30.74,30.87,30.07,30.2,3583247],[1571319000,30.1,30.35,29.93,30.29,5132137],[1571405400,30.6,30.66,29.5,29.76,4379683],[1571664600,32.54,33.29,32.09,32.76,13382518],[1571751000,32.63,32.8,31.77,32.18,4767123],[1571837400,32.17,32.27,31.66,31.98,2109364],[1571923800,32.54,32.76,32.29,32.7,2790138],[1572010200,32.68,32.73,32.0,32.27,3228436],[1572269400,32.5,34.07,32.46,33.58,5081888],[1572355800,33.12,33.76,33.12,33.66,2400285],[1572442200,33.75,33.84,33.42,33.57,1477386],[1572528600,33.58,33.84,33.01,33.39,2533524],[1572615000,33.55,33.88,33.32,33.85,1468446],[1572877800,33.9,34.33,33.75,34.24,1262297],[1572964200,34.12,34.54,34.07,34.52,2253497],[1573050600,34.42,34.47,34.05,34.2,1915322],[1573137000,34.4,34.55,33.96,34.07,1887200],[1573223400,33.96,34.37,33.86,34.16,1660630],[1573482600,33.96,34.46,33.82,34.23,1092970],[1573569000,33.97,34.16,33.7,33.87,1346838],[1573655400,33.75,33.95,33.62,33.88,1195250],[1573741800,34.01,34.6,33.84,34.56,1782474],[1573828200,34.7,36.0,34.7,35.79,4712279],[1574087400,38.13,40.31,38.1,40.07,16520372],[1574173800,39.36,39.66,39.17,39.43,4841032],[1574260200,38.97,40.22,38.8,40.15,2712956],[1574346600,40.08,40.19,39.67,40.09,2598023],[1574433000,40.18,40.69,40.01,40.46,1755400],[1574692200,40.37,41.48,40.37,41.07,2125477],[1574778600,41.32,41.6,40.79,41.47,2552003],[1574865000,41.34,41.91,41.34,41.81,1629502],[1575037800,41.34,42.1,41.33,41.97,1990245],[1575297000,42.24,42.25,40.72,41.12,2330316],[1575383400,40.52,40.63,40.22,40.61,2619458],[1575469800,41.17,41.17,40.37,40.41,1214565],[1575556200,40.45,40.49,39.98,40.23,1599060],[1575642600,40.32,40.53,40.21,40.46,876230],[1575901800,40.22,40.73,40.22,40.32,911028],[1575988200,40.31,40.83,40.22,40.45,954032],[1576074600,40.68,41.5,40.66,41.46,4750775],[1576161000,41.79,42.01,41.53,41.75,2668541],[1576247400,41.7,43.25,41.64,43.25,6440611],[1576506600,43.02,43.53,42.76,42.84,3822102],[1576593000,42.83,42.84,41.88,41.94,1823007],[1576679400,42.25,42.32,41.75,41.96,2008836],[1576765800,42.22,42.98,41.88,42.72,2978580],[1576852200,43.1,43.46,42.69,43.16,2037351],[1577111400,43.36,43.84,43.09,43.58,1243872],[1577197800,43.55,43.69,43.23,43.67,451237],[1577370600,43.63,43.89,43.44,43.73,748142],[1577457000,44.1,44.28,43.66,43.9,1265778],[1577716200,43.93,43.97,43.08,43.44,893431],[1577802600,43.18,43.62,43.17,43.49,562094],[1577975400,43.83,44.21,43.59,44.08,973940],[1578061800,43.4,43.77,43.0,43.21,1399110],[1578321000,43.12,43.3,42.83,43.1,1162044],[1578407400,43.17,43.43,42.84,43.16,1266514],[1578493800,43.36,44.05,43.27,43.77,1336018],[1578580200,44.41,44.77,44.14,44.54,2161352],[1578666600,44.7,44.83,43.81,44.06,1392677],[1578925800,44.46,44.46,43.87,44.3,1932827],[1579012200,44.3,44.67,43.23,43.53,1610223],[1579098600,43.8,43.98,43.19,43.23,1549254],[1579185000,44.78,44.82,43.64,44.13,2612973],[1579271400,44.63,45.46,44.34,45.4,3327556],[1579617000,45.01,45.16,44.58,45.05,2243877],[1579703400,44.26,45.77,44.24,45.35,2425631],[1579789800,45.04,45.6,44.42,44.9,1683845],[1579876200,45.2,45.63,44.95,45.38,2106633],[1580135400,43.74,44.96,43.63,44.56,2299713],[1580221800,44.67,45.62,44.16,45.57,2199669],[1580308200,45.76,46.58,45.49,46.11,3546615],[1580394600,45.41,45.95,45.3,45.9,1675906],[1580481000,45.5,45.55,44.59,44.81,2696455],[1580740200,45.27,46.02,45.09,46.0,1614883],[1580826600,47.26,48.19,46.82,48.01,3701442],[1580913000,48.76,48.82,47.6,48.25,2563959],[1580999400,47.92,48.32,47.65,48.2,1885501],[1581085800,48.21,48.68,48.01,48.49,1719192],[1581345000,48.21,48.23,47.84,48.05,2440839],[1581431400,48.6,48.73,47.96,48.27,2229374],[1581517800,48.5,48.91,48.0,48.55,3567474],[1581604200,48.4,48.95,48.21,48.62,1718643],[1581690600,47.05,47.8,46.48,46.57,4138203],[1582036200,45.95,46.34,45.32,45.41,5809413],[1582122600,46.11,46.4,45.88,46.15,2114584],[1582209000,46.68,46.9,45.97,46.67,3937505],[1582295400,46.17,46.29,44.0,44.54,4228928],[1582554600,42.85,43.45,41.86,42.02,3779180],[1582641000,42.7,42.73,39.83,40.06,16156531],[1582727400,40.44,41.79,40.25,41.5,7419697],[1582813800,40.07,41.33,40.05,40.13,3939516],[1582900200,38.75,40.71,38.7,40.61,4994838],[1583159400,40.85,41.28,40.05,40.91,3635106],[1583245800,41.5,41.8,39.22,39.85,3850707],[1583332200,40.71,41.5,40.03,41.43,2556284],[1583418600,40.13,40.92,40.02,40.48,2742741],[1583505000,38.66,39.68,38.58,39.51,3169216],[1583760600,35.65,35.65,33.25,34.24,8473104],[1583847000,37.68,38.04,35.69,36.92,4958819],[1583933400,35.61,36.5,35.16,35.87,5615681],[1584019800,32.33,34.0,32.03,32.12,4443890],[1584106200,34.91,35.29,33.05,33.94,5294953],[1584365400,30.67,32.52,29.94,30.8,3788916],[1584451800,31.16,33.33,30.06,31.66,3603759],[1584538200,28.32,30.3,27.93,28.91,4047345],[1584624600,29.0,31.34,28.16,30.62,3208626],[1584711000,31.39,31.58,29.66,29.91,4092453],[1584970200,30.63,30.69,28.37,29.14,3477322],[1585056600,30.95,32.15,30.64,31.89,2996418],[1585143000,31.87,34.45,31.64,33.42,2572213],[1585229400,33.07,34.88,32.95,34.82,2670717],[1585315800,32.89,33.78,32.39,32.98,2413146],[1585575000,33.31,33.93,32.78,33.88,2973216],[1585661400,34.0,35.22,33.76,34.05,3245678],[1585747800,33.0,33.48,32.05,32.43,3850334],[1585834200,32.5,33.2,31.85,32.61,3758091],[1585920600,33.36,33.53,32.08,32.38,2210844],[1586179800,33.62,34.26,33.47,33.87,3555565],[1586266200,35.11,35.77,34.46,34.5,3317870],[1586352600,35.21,36.2,34.93,35.93,3118740],[1586439000,36.7,36.86,35.67,36.14,2641651],[1586784600,35.99,36.79,35.81,36.7,2805066],[1586871000,37.18,38.24,36.82,36.85,2674466],[1586957400,35.34,35.39,34.4,34.89,3659313],[1587043800,35.66,35.71,34.64,34.97,3458581],[1587130200,35.74,36.74,35.26,36.62,3403212],[1587389400,35.71,37.09,35.26,35.41,3854840],[1587475800,34.1,34.84,33.79,34.02,4170287],[1587562200,35.12,35.14,34.51,34.95,1896122],[1587648600,35.43,35.73,34.96,35.25,1095629],[1587735000,35.51,36.04,35.01,36.0,1683220],[1587994200,35.67,36.99,35.67,36.96,2606240],[1588080600,38.23,38.5,36.59,37.59,3504853],[1588167000,38.29,39.8,38.19,39.61,3465317],[1588253400,38.71,39.22,37.36,37.78,3199107],[1588339800,37.21,37.68,36.63,37.41,1483982],[1588599000,37.45,38.04,37.12,38.0,1671654],[1588685400,38.45,38.89,38.23,38.38,1765701],[1588771800,38.27,38.83,37.94,38.51,1229800],[1588858200,39.07,40.62,38.81,40.3,3219406],[1588944600,40.5,40.81,40.3,40.74,1520775],[1589203800,40.5,40.5,39.77,40.18,1467633],[1589290200,40.51,40.9,39.73,40.0,1698690],[1589376600,40.03,40.19,38.21,38.71,2428275],[1589463000,38.17,38.87,37.47,38.83,1542171],[1589549400,38.44,39.48,37.93,38.99,1518471],[1589808600,40.11,41.0,39.99,40.92,2187350],[1589895000,40.7,41.26,40.46,40.69,1247279],[1589981400,41.64,41.77,41.05,41.31,2595838],[1590067800,41.73,41.73,40.58,40.63,1864809],[1590154200,40.77,40.78,40.16,40.26,1355072],[1590499800,41.77,41.77,40.38,40.43,2674779],[1590586200,40.81,40.83,39.46,40.67,2575275],[1590672600,40.86,41.42,40.4,40.64,2339546],[1590759000,40.44,40.47,39.76,40.23,3214692],[1591018200,40.63,41.1,40.39,41.0,2113541],[1591104600,41.42,41.55,40.74,41.04,2555438],[1591191000,41.38,42.0,41.2,41.47,1700050],[1591277400,41.01,41.55,40.98,41.32,2091344],[1591363800,41.95,42.59,41.89,42.32,1333015],[1591623000,42.39,42.59,41.89,42.45,1499127],[1591709400,41.84,42.38,41.77,41.99,1189694],[1591795800,42.38,42.46,41.6,42.17,1011503],[1591882200,40.75,41.51,40.23,40.29,1820284],[1591968600,41.46,42.24,41.01,42.18,2688287],[1592227800,41.2,43.26,41.19,42.88,2929184],[1592314200,43.19,44.19,42.81,43.54,2857772],[1592400600,43.74,44.11,43.63,43.96,1933926],[1592487000,43.85,44.87,43.77,44.56,2119407],[1592573400,45.56,45.67,45.0,45.62,3197525],[1592832600,46.01,47.27,45.94,46.94,2573451],[1592919000,47.71,49.91,47.14,49.0,5230483],[1593005400,49.92,50.46,48.8,50.3,4607884],[1593091800,50.14,50.75,49.44,50.55,7333677],[1593178200,50.27,50.32,48.96,49.03,2639902],[1593437400,48.97,49.63,48.59,49.24,2388154],[1593523800,48.72,50.14,48.64,50.02,2079247],[1593610200,49.62,50.04,49.32,49.49,1596402],[1593696600,50.39,50.66,49.96,50.12,1943199],[1594042200,50.61,51.77,50.36,50.43,3189702],[1594128600,50.82,50.84,49.88,49.97,2624092],[1594215000,50.61,50.62,49.89,50.23,2369334],[1594301400,50.96,51.8,50.35,51.38,2106631],[1594387800,51.82,51.99,50.64,51.33,1436889],[1594647000,51.51,52.69,51.42,51.72,5302423],[1594733400,50.83,53.41,50.8,53.35,4961121],[1594819800,54.14,54.91,53.85,54.82,3009383],[1594906200,54.01,54.34,53.33,53.49,3301748],[1594992600,55.01,55.22,54.23,54.74,2653940],[1595251800,55.49,56.28,54.85,56.19,2354548],[1595338200,56.88,56.97,55.68,56.02,2199102],[1595424600,55.79,56.64,55.76,56.53,1519398],[1595511000,55.9,56.59,55.27,56.21,2816892],[1595597400,55.54,56.44,55.19,56.22,1912429],[1595856600,56.66,58.02,56.47,57.89,2268089],[1595943000,55.16,57.34,54.74,57.0,3384977],[1596029400,57.67,57.84,57.09,57.61,2162555],[1596115800,56.51,57.24,55.79,57.23,1625391],[1596202200,57.39,57.54,56.72,57.54,1894425],[1596461400,58.35,59.04,57.78,58.56,1641494],[1596547800,58.42,58.91,58.25,58.69,1201681],[1596634200,59.42,59.83,59.11,59.8,1508421],[1596720600,59.64,60.18,59.59,60.0,1653280],[1596807000,59.72,60.0,58.53,59.16,1278806],[1597066200,58.96,59.06,56.98,57.0,2309525],[1597152600,57.79,58.25,56.68,57.0,2687756],[1597239000,57.75,58.74,57.28,57.92,2349301],[1597325400,60.81,61.4,59.01,59.49,5583285],[1597411800,60.64,60.65,59.92,60.05,2851008],[1597671000,61.01,61.6,60.51,60.61,6710772],[1597757400,61.5,61.73,60.97,61.4,3904285],[1597843800,62.18,62.95,61.85,62.46,4539343],[1597930200,63.42,63.74,62.41,63.63,5641924],[1598016600,63.39,64.13,63.16,63.57,3290750],[1598275800,64.84,65.27,64.42,65.26,3438626],[1598362200,66.25,67.11,65.7,66.97,3167746],[1598448600,65.67,66.47,65.13,65.51,5108637],[1598535000,65.68,65.78,63.86,64.59,3180479],[1598621400,65.4,66.19,65.0,65.25,2509031],[1598880600,68.2,70.11,66.65,68.23,19729782],[1598967000,68.87,69.4,67.74,67.83,5708890],[1599053400,67.97,68.27,65.03,67.58,5132274],[1599139800,66.45,66.79,64.71,65.25,4997964],[1599226200,65.91,65.96,63.1,64.44,6509157],[1599571800,62.56,62.68,60.98,61.13,6394163],[1599658200,62.08,62.73,61.81,62.58,2786781],[1599744600,62.97,63.12,60.89,60.95,2763877],[1599831000,61.87,62.51,61.09,61.82,2426075],[1600090200,62.15,62.99,62.06,62.58,1387777],[1600176600,63.76,63.76,62.07,62.27,3417328],[1600263000,61.79,62.41,61.37,61.53,2270190],[1600349400,59.96,60.94,59.39,60.91,2502169],[1600435800,60.92,61.5,60.14,60.97,2127491],[1600695000,59.17,59.62,58.72,59.09,2680942],[1600781400,60.3,66.34,58.94,66.06,11000578],[1600867800,67.75,69.6,64.53,64.8,8357686],[1600954200,63.39,63.78,61.67,61.73,3939928],[1601040600,62.04,63.45,61.53,63.33,3201343],[1601299800,64.3,64.53,63.64,64.21,1949063],[1601386200,63.95,64.77,63.77,64.62,1920279],[1601472600,64.77,65.46,64.58,65.25,1583266],[1601559000,65.65,65.79,63.3,63.56,2588813],[1601645400,62.32,63.62,62.25,62.5,1529932],[1601904600,62.56,64.0,62.36,63.66,1732671],[1601991000,63.77,64.01,61.75,61.88,2856215],[1602077400,62.07,62.26,60.63,60.85,2945800],[1602163800,61.55,61.59,60.57,60.79,2556562],[1602250200,60.81,61.95,60.57,60.93,2449177],[1602509400,61.6,61.88,60.95,61.55,1760153],[1602595800,62.15,63.01,61.83,62.69,1282970],[1602682200,62.8,62.89,61.18,61.36,1573639],[1602768600,60.14,61.04,59.78,60.73,1875642],[1602855000,59.75,60.12,57.78,57.99,3828776],[1603114200,58.07,58.81,56.94,56.95,2793639],[1603200600,57.47,57.66,55.72,56.13,3762856],[1603287000,55.65,57.87,55.62,57.22,2771625],[1603373400,58.03,58.68,57.02,58.0,1941067],[1603459800,58.6,59.26,58.22,59.12,1614470],[1603719000,58.39,59.2,58.16,59.13,2040581],[1603805400,59.02,59.87,58.64,59.53,2354130],[1603891800,57.58,58.43,57.36,57.84,3327920],[1603978200,58.25,59.11,57.89,58.9,1722159],[1604064600,57.73,57.94,56.81,57.57,2179354],[1604327400,57.47,58.25,56.51,56.88,2072815],[1604413800,57.47,58.1,57.02,57.71,993055],[1604500200,59.36,61.5,59.17,61.24,2736149],[1604586600,62.17,63.24,61.74,63.11,2233121],[1604673000,62.93,63.9,62.51,63.81,1440539],[1604932200,65.28,66.43,65.0,65.03,3127769],[1605018600,62.96,63.52,61.08,61.31,2685006],[1605105000,60.93,61.83,60.74,61.19,1867348],[1605191400,61.61,61.95,60.9,60.99,961889],[1605277800,61.41,62.11,61.15,62.11,1055764],[1605537000,62.05,62.23,61.33,62.1,1217858],[1605623400,61.71,61.72,60.72,61.49,1581203],[1605709800,61.87,62.47,61.55,61.72,988583],[1605796200,61.59,62.57,61.19,62.53,1245827],[1605882600,62.45,62.96,61.94,61.94,870209],[1606141800,62.85,62.91,61.33,61.47,1617292],[1606228200,64.11,65.55,63.82,65.38,2869548],[1606314600,64.84,65.73,64.74,65.62,1855813],[1606487400,66.61,68.03,66.49,67.19,1335617],[1606746600,70.02,70.02,68.74,68.96,3774505],[1606833000,69.82,70.53,69.19,70.05,2357507],[1606919400,69.12,69.5,68.65,69.2,1168223],[1607005800,69.28,69.68,68.81,69.34,1450398],[1607092200,68.85,69.18,68.01,68.05,1774097],[1607351400,68.89,69.05,67.66,68.0,1433192],[1607437800,67.92,69.2,67.62,68.97,1379884],[1607524200,69.85,70.97,68.36,69.03,1207972],[1607610600,68.56,71.05,68.01,70.68,2195127],[1607697000,70.05,70.72,69.93,70.28,805197],[1607956200,70.16,70.16,67.95,68.23,1841183],[1608042600,68.99,69.11,68.23,68.89,1410886],[1608129000,69.41,71.0,69.35,70.8,2590251],[1608215400,71.57,72.4,70.11,70.65,1050976],[1608301800,70.65,70.79,69.13,69.27,1771747],[1608561000,67.76,67.83,66.73,67.09,1789127],[1608647400,67.28,67.44,66.3,67.11,1002761],[1608733800,67.73,68.77,67.64,67.69,822039],[1608820200,68.18,68.29,67.17,67.65,370633],[1609165800,68.44,68.87,67.55,68.2,856212],[1609252200,68.52,68.64,67.38,67.51,605847],[1609338600,67.62,69.68,67.53,69.5,1202627],[1609425000,69.45,69.75,68.75,69.58,891933],[1609770600,70.84,71.17,68.7,69.75,2120375],[1609857000,69.56,72.95,69.47,72.16,2217235],[1609943400,70.6,71.12,69.5,70.11,2272443],[1610029800,70.27,71.0,68.76,70.9,1222276],[1610116200,71.65,72.03,70.1,70.9,1774732],[1610375400,70.05,70.87,69.53,69.92,1105759],[1610461800,69.97,70.07,68.88,69.6,755492],[1610548200,69.52,69.66,68.5,68.99,1158470],[1610634600,69.3,69.59,68.44,69.29,1105299],[1610721000,69.33,69.52,66.93,67.32,1878363],[1611066600,67.74,68.18,67.21,68.08,2147388],[1611153000,68.08,70.57,68.01,70.35,2010981],[1611239400,69.09,69.97,67.8,68.65,1655468],[1611325800,67.92,68.11,66.41,66.44,1996282],[1611585000,67.29,67.39,64.41,65.09,4561851],[1611671400,65.65,66.14,64.99,65.1,1484022],[1611757800,64.74,64.79,62.86,63.6,2035278],[1611844200,64.12,64.77,63.7,63.94,1125369],[1611930600,63.96,63.99,62.2,62.64,1277729],[1612189800,62.99,63.82,62.79,63.6,1616465],[1612276200,65.21,65.85,64.44,65.64,2087057],[1612362600,65.18,65.87,64.52,64.69,1460977],[1612449000,65.41,66.63,64.77,66.47,1328708],[1612535400,66.35,67.05,65.79,66.98,1083815],[1612794600,67.25,68.39,67.15,68.38,1126725],[1612881000,68.33,69.95,68.09,69.81,2016634],[1612967400,70.66,72.45,70.24,71.7,2197673],[1613053800,71.74,73.26,71.15,72.92,1693929],[1613140200,72.04,74.11,72.04,73.83,1699787],[1613485800,72.89,74.32,72.22,72.77,2138828],[1613572200,70.64,70.99,68.85,70.15,3281887],[1613658600,68.8,69.02,67.5,67.6,2221183],[1613745000,69.23,69.23,66.72,67.26,2809112],[1614004200,66.76,67.32,65.89,65.92,1771260],[1614090600,64.89,67.6,63.75,67.28,1465890],[1614177000,67.06,67.73,66.37,66.97,1999242],[1614263400,66.51,67.24,64.57,64.72,1995525],[1614349800,65.17,65.25,63.91,63.98,1350601],[1614609000,65.94,67.7,65.92,67.37,1807059],[1614695400,67.99,68.71,67.62,67.93,1890356],[1614781800,68.62,68.63,65.78,66.09,3390104],[1614868200,66.41,67.01,62.64,62.76,3679920],[1614954600,63.92,64.09,62.12,63.63,3556752],[1615213800,63.52,63.99,60.2,60.31,2097452],[1615300200,63.24,64.46,62.21,63.49,2308846],[1615386600,64.44,64.95,63.17,63.73,1760283],[1615473000,64.66,66.9,64.55,66.78,2316306],[1615559400,65.66,67.81,65.58,67.8,2191412],[1615815000,67.65,69.53,67.44,69.53,1790501],[1615901400,69.21,71.2,69.17,70.91,3550681],[1615987800,69.1,69.21,66.95,68.51,2649876],[1616074200,67.81,68.01,64.84,65.23,2995492],[1616160600,65.84,66.57,64.85,65.55,1705774],[1616419800,66.07,66.07,65.16,65.28,1219623],[1616506200,64.6,65.17,64.08,64.45,897995],[1616592600,64.5,64.66,63.06,63.06,1115349],[1616679000,62.71,63.02,60.99,62.14,2181148],[1616765400,63.05,63.39,61.74,63.01,1314569],[1617024600,63.19,63.79,62.29,63.74,1075706],[1617111000,62.49,63.41,62.02,63.14,1210248],[1617197400,63.07,65.07,63.02,64.06,2014990],[1617283800,64.6,65.19,64.3,64.97,1171537],[1617629400,64.9,64.96,64.45,64.74,733217],[1617715800,64.14,64.83,64.0,64.37,1642511],[1617802200,63.41,63.46,62.55,62.67,1729345],[1617888600,63.35,64.5,63.05,63.74,1750535],[1617975000,62.78,62.98,61.93,62.02,1147042],[1618234200,62.77,62.9,62.06,62.85,1104873],[1618320600,62.85,63.36,58.91,59.83,13370794],[1618407000,61.75,62.27,60.83,61.0,5129895],[1618493400,60.86,61.55,60.74,61.36,1502784],[1618579800,61.55,62.0,61.32,61.93,942566],[1618839000,61.93,62.01,60.89,61.06,1219071],[1618925400,60.86,61.33,60.1,60.82,1765331],[1619011800,60.67,60.8,60.34,60.71,878999],[1619098200,61.58,61.84,60.7,60.88,1836214],[1619184600,61.05,61.23,60.18,60.88,2105390],[1619443800,61.53,63.05,61.43,62.99,2027790],[1619530200,63.14,63.52,62.33,63.38,1556517],[1619616600,63.84,65.0,63.5,64.96,2401347],[1619703000,66.12,67.82,65.57,67.73,3637718],[1619789400,65.7,66.61,65.43,65.55,1896575],[1620048600,66.04,66.07,64.33,64.51,828618],[1620135000,64.25,64.38,62.92,64.22,1455989],[1620221400,64.96,65.87,64.78,64.95,1168934],[1620307800,65.01,65.35,63.81,64.93,1276001],[1620394200,65.25,65.76,64.99,65.61,875211],[1620653400,65.02,65.07,63.1,63.25,1479945],[1620739800,62.0,63.32,61.53,63.28,1416115],[1620826200,62.63,63.16,61.37,61.57,1569906],[1620912600,62.49,63.0,61.98,62.54,1139532],[1620999000,62.91,63.56,62.58,63.43,1063140],[1621258200,62.38,63.76,62.26,63.67,1082850],[1621344600,63.9,65.18,63.87,64.69,2111091],[1621431000,63.62,64.3,63.14,64.27,1215777],[1621517400,63.82,64.81,63.82,64.79,1148323],[1621603800,64.8,65.37,64.57,64.89,1104710],[1621863000,64.83,66.7,64.8,66.66,1658242],[1621949400,67.01,67.21,66.43,66.86,932759],[1622035800,67.04,68.06,67.02,68.01,827910],[1622122200,68.0,68.45,67.69,67.9,1447444],[1622208600,67.98,68.19,67.47,67.54,1385999],[1622554200,68.43,68.43,66.54,67.15,1502352],[1622640600,67.49,68.06,67.06,67.6,1211539],[1622727000,67.19,67.21,66.67,66.75,783987],[1622813400,67.02,67.85,66.87,67.62,1602438],[1623072600,67.27,67.73,66.87,67.48,750223],[1623159000,67.71,68.14,67.31,67.61,945770],[1623245400,68.06,69.67,68.02,68.53,1803043],[1623331800,69.11,69.87,68.94,69.82,1004597],[1623418200,70.86,70.91,69.77,70.26,1057254],[1623677400,70.01,70.63,69.75,70.52,527771],[1623763800,70.42,70.45,68.02,68.09,1763566],[1623850200,68.98,69.15,67.58,68.4,1363976],[1623936600,68.97,69.97,68.52,69.79,1074855],[1624023000,69.08,70.27,68.71,69.58,1981355],[1624282200,69.77,69.82,68.4,68.47,1038076],[1624368600,68.58,68.78,68.14,68.56,840343],[1624455000,68.95,69.62,68.63,69.27,1010762],[1624541400,69.68,70.19,69.37,69.64,581621],[1624627800,69.97,70.65,69.96,70.53,731750],[1624887000,70.7,70.96,70.15,70.89,635384],[1624973400,70.27,70.39,69.65,70.08,841983],[1625059800,70.83,71.06,70.29,70.75,969954],[1625146200,70.99,71.07,69.72,70.41,658053],[1625232600,70.42,71.42,70.09,71.32,651602],[1625578200,71.06,71.29,69.85,70.75,908298],[1625664600,71.61,72.7,71.21,71.83,1648555],[1625751000,70.35,71.91,69.65,71.74,1375798],[1625837400,71.32,71.34,69.26,70.44,1071248],[1626096600,70.71,71.17,70.41,70.88,501857],[1626183000,70.51,71.48,70.22,70.69,500694],[1626269400,70.98,71.22,69.75,69.8,555773],[1626355800,70.17,70.64,69.38,69.69,609792],[1626442200,70.24,70.26,69.17,69.64,929999],[1626701400,68.42,68.68,67.98,68.35,600566],[1626787800,68.11,68.99,67.56,68.57,557366],[1626874200,68.74,69.83,68.48,69.8,538404],[1626960600,70.22,70.29,69.62,69.93,593197],[1627047000,70.33,70.51,69.42,70.34,706949],[1627306200,70.41,70.66,69.6,69.8,949628],[1627392600,69.8,69.88,67.42,68.21,2031712],[1627479000,69.36,69.79,68.41,68.96,1284632],[1627565400,69.05,69.17,68.29,68.94,1220935],[1627651800,67.64,68.56,67.64,67.93,1087224],[1627911000,68.37,68.52,67.49,67.53,993876],[1627997400,67.53,67.7,67.14,67.52,949909],[1628083800,67.42,68.9,67.39,68.39,746998],[1628170200,68.37,68.89,67.86,68.05,665366],[1628256600,68.03,68.17,66.84,67.8,716858],[1628515800,68.06,68.18,67.48,67.48,466224],[1628602200,67.23,67.5,66.65,67.36,780809],[1628688600,67.7,68.76,67.7,68.67,1402676],[1628775000,68.7,68.87,67.53,67.71,815579],[1628861400,67.82,68.09,67.3,67.94,352599],[1629120600,68.32,69.52,68.29,69.51,1438877],[1629207000,69.5,69.95,68.83,69.07,903802],[1629293400,69.06,69.34,68.45,68.58,779901],[1629379800,67.73,68.86,67.73,68.25,773855],[1629466200,68.19,68.72,67.74,68.11,700125],[1629725400,68.44,69.16,68.29,68.91,684125],[1629811800,69.01,69.95,68.82,69.89,1054591],[1629898200,69.53,69.63,68.97,69.51,631388],[1629984600,69.36,70.53,69.33,70.4,1263068],[1630071000,70.49,72.42,70.12,72.41,1706045],[1630330200,72.32,73.52,72.1,73.13,1217840],[1630416600,73.88,77.05,73.7,76.9,3530037],[1630503000,76.66,78.9,76.57,77.87,2539323],[1630589400,78.8,79.25,77.3,77.45,1352883],[1630675800,77.64,78.9,77.41,78.85,1143360],[1631021400,79.1,79.17,77.61,77.62,1226865],[1631107800,77.6,78.59,77.02,78.28,1353981],[1631194200,77.79,79.05,77.72,78.71,992133],[1631280600,79.51,80.6,79.32,80.12,1453917],[1631539800,80.65,81.88,79.86,81.73,1551087],[1631626200,81.68,82.2,81.26,81.87,1120320],[1631712600,82.05,82.13,80.75,81.49,1196767],[1631799000,81.99,82.62,80.85,80.98,1635347],[1631885400,81.13,81.29,80.09,80.38,1524193],[1632144600,79.19,80.12,78.56,79.07,1284603],[1632231000,79.55,79.6,78.21,79.0,991664],[1632317400,79.03,79.52,78.53,78.79,810856],[1632403800,79.17,80.87,78.94,80.83,1083724],[1632490200,79.94,80.41,79.36,80.2,948235],[1632749400,81.5,82.46,80.21,82.04,2294566],[1632835800,80.3,80.77,78.97,79.45,991900],[1632922200,80.02,80.08,78.74,78.95,883259],[1633008600,79.04,80.32,78.97,79.69,1072019],[1633095000,79.6,80.27,79.22,79.25,712316],[1633354200,78.34,78.56,74.94,75.0,2747537],[1633440600,76.14,77.97,75.89,77.53,1452905],[1633527000,76.06,78.63,75.97,78.53,1247505],[1633613400,79.06,80.26,78.99,79.5,1172266],[1633699800,79.3,79.89,78.93,79.63,782593],[1633959000,78.95,80.12,77.76,77.9,903478],[1634045400,77.96,78.63,77.15,77.3,1271758],[1634131800,77.55,78.28,76.69,76.99,1363746],[1634218200,77.96,77.97,76.93,77.16,1067598],[1634304600,77.23,77.5,76.0,76.19,1193086],[1634563800,76.13,76.91,75.79,76.79,1094223],[1634650200,77.59,77.6,76.51,77.1,1734402],[1634736600,77.53,77.53,76.27,76.34,983140],[1634823000,76.15,76.19,75.49,76.04,716928],[1634909400,76.63,77.03,75.44,75.7,847401],[1635168600,76.36,77.55,76.17,77.05,1325730],[1635255000,77.54,77.55,76.0,76.27,984885],[1635341400,77.42,79.96,77.0,78.01,2497566],[1635427800,79.25,83.55,79.07,83.1,2858082],[1635514200,82.1,83.1,81.37,82.84,1373803],[1635773400,83.01,83.54,81.02,82.46,1027721],[1635859800,82.13,83.49,81.86,82.91,1070344],[1635946200,82.32,84.03,82.24,84.0,1386019],[1636032600,84.35,84.8,82.82,84.12,933173],[1636119000,84.95,86.31,83.92,86.07,1488900],[1636381800,86.85,87.11,86.16,86.47,920622],[1636468200,86.61,86.76,84.49,84.63,1494339],[1636554600,84.12,84.53,81.96,82.01,1077743],[1636641000,82.7,84.69,82.7,83.25,890383],[1636727400,81.4,82.33,80.35,82.07,2487922],[1636986600,83.36,83.42,81.09,81.77,730768],[1637073000,81.2,81.35,80.65,81.31,464208],[1637159400,81.31,82.41,80.94,81.77,1631899],[1637245800,81.57,82.06,80.87,81.88,1045527],[1637332200,81.87,83.87,81.0,81.05,1208880],[1637591400,79.0,79.0,71.32,72.86,5577830],[1637677800,75.09,75.63,74.11,75.35,2516004],[1637764200,74.0,74.89,72.54,73.97,1341768],[1637937000,71.57,71.64,70.37,70.44,1583951],[1638196200,73.43,73.43,71.81,72.0,1362286],[1638282600,72.6,73.31,71.15,71.94,1992484],[1638369000,72.6,73.58,71.17,71.17,1668323],[1638455400,71.69,72.02,70.19,71.06,1359698],[1638541800,71.54,71.69,68.74,69.4,1881055],[1638801000,67.89,68.4,67.17,68.1,1330215],[1638887400,68.57,69.08,66.98,67.01,3716228],[1638973800,66.77,67.88,64.72,67.04,3235039],[1639060200,67.56,67.67,65.37,65.65,1735106],[1639146600,65.72,65.79,63.23,63.35,2153716],[1639405800,61.93,62.93,61.31,61.7,1856420],[1639492200,61.17,63.07,60.46,62.01,1731957],[1639578600,61.82,61.83,60.13,61.13,1628913],[1639665000,64.06,65.49,61.89,62.55,3008222],[1639751400,62.19,63.37,61.91,62.18,1903561],[1640010600,61.03,61.7,60.02,60.32,1265287],[1640097000,60.84,62.22,60.78,61.83,1481672],[1640183400,62.31,62.42,60.57,60.86,1724230],[1640269800,60.59,60.69,59.3,59.99,1945561],[1640615400,60.68,60.83,60.24,60.69,1393960],[1640701800,60.78,61.25,60.4,60.58,757117],[1640788200,60.43,60.5,58.98,59.59,1026319],[1640874600,59.71,61.46,59.37,61.34,2027000],[1640961000,61.55,61.66,60.16,60.5,890500],[1641220200,61.29,61.79,60.33,60.4,2072948],[1641306600,60.17,60.61,58.65,59.22,2131294],[1641393000,58.41,58.91,55.27,55.34,2327859],[1641479400,55.27,56.38,54.77,55.32,2455865],[1641565800,55.32,55.99,54.46,54.64,2534918],[1641825000,54.9,56.09,53.94,56.06,2842619],[1641911400,57.12,59.01,56.91,58.13,3954042],[1641997800,59.31,59.54,58.25,58.98,2086731],[1642084200,57.48,58.75,54.36,54.51,3887628],[1642170600,52.91,54.01,50.27,52.34,5549436],[1642516200,49.26,50.44,48.67,48.69,5555394],[1642602600,50.88,50.88,48.24,48.34,5945598],[1642689000,49.41,50.33,47.69,47.8,3595483],[1642775400,47.8,47.89,44.45,44.47,4186104],[1643034600,41.11,42.56,39.0,42.5,7669466],[1643121000,41.46,44.2,40.65,43.12,5588603],[1643207400,44.38,45.03,41.64,42.12,4876882],[1643293800,45.73,45.73,42.98,43.05,7058610],[1643380200,44.05,44.74,43.14,44.41,5183741],[1643639400,45.33,48.14,45.3,48.06,3446009],[1643725800,48.88,49.15,47.78,48.52,2269534],[1643812200,49.2,50.12,47.76,48.03,3060852],[1643898600,46.16,47.11,45.72,45.84,2555067],[1643985000,46.01,46.69,45.44,46.16,1909335],[1644244200,46.07,46.67,45.23,45.99,1679739],[1644330600,46.16,48.66,46.0,48.56,1863381],[1644417000,50.05,50.82,49.05,50.57,2439689],[1644503400,49.21,52.25,49.19,50.98,3207811],[1644589800,49.06,49.71,44.01,44.41,5916764],[1644849000,45.85,46.09,44.48,45.18,3978195],[1644935400,49.25,52.79,49.24,52.4,8060787],[1645021800,53.0,53.85,51.8,53.58,3193659],[1645108200,49.8,50.75,48.88,48.94,3067936],[1645194600,46.7,47.28,44.69,44.75,6898969],[1645540200,40.52,43.31,38.8,39.42,14953200],[1645626600,38.7,39.02,34.0,34.04,7743075],[1645713000,17.96,23.39,14.11,20.32,77397614],[1645799400,23.94,24.05,17.83,18.94,28271402],[1729517400,14.29,20.36,14.09,20.0,13616749],[1729603800,19.79,20.0,17.76,18.73,6443964],[1729690200,18.0,18.43,17.1,17.16,9849849],[1729776600,16.8,17.75,16.71,17.63,7851777],[1729863000,17.27,19.58,17.27,19.57,6748210],[1730122200,20.0,24.27,20.0,23.75,13233147],[1730208600,22.9,24.5,22.5,23.65,7398169],[1730295000,23.0,23.19,20.75,22.06,22991974],[1730381400,22.6,22.6,20.0,21.38,4580792],[1730467800,21.7,21.7,19.57,20.14,3981548],[1730730600,19.62,21.72,19.21,20.75,4185001],[1730817000,20.74,21.2,18.51,19.0,12434671],[1730903400,19.93,19.93,17.5,19.3,4144060],[1730989800,19.08,20.9,19.08,20.68,2570089],[1731076200,20.98,21.0,19.5,19.92,2356030],[1731335400,19.8,21.3,19.18,20.94,2907456],[1731421800,20.5,20.93,19.5,19.6,2125500],[1731508200,19.43,20.0,18.42,18.57,2088897],[1731594600,19.0,19.0,17.51,18.09,2164529],[1731681000,18.0,18.41,17.39,17.6,2010824],[1731940200,17.73,18.74,17.66,18.52,1782325],[1732026600,19.1,20.82,18.64,20.65,4774009],[1732113000,20.53,20.75,19.46,20.58,3861686],[1732199400,20.65,22.0,19.64,22.0,3639761],[1732285800,21.56,23.82,21.56,23.49,4336851],[1732545000,24.0,26.0,23.25,23.49,6115766],[1732631400,23.16,23.6,22.0,22.12,2444576],[1732717800,22.01,22.8,21.0,21.43,2595079],[1732890600,22.0,22.92,21.25,21.99,2856209],[1733149800,26.12,27.9,24.76,25.75,17142170],[1733236200,25.8,30.0,25.43,29.33,22322055],[1733322600,30.5,33.15,30.07,32.31,24007678],[1733409000,33.94,34.6,30.54,31.16,10374685],[1733495400,31.98,36.84,31.75,36.77,14708327],[1733754600,38.57,38.69,31.53,31.96,16659004],[1733841000,32.71,35.25,31.53,33.7,9979131],[1733927400,34.4,34.95,31.95,32.78,6029906],[1734013800,32.36,33.0,31.12,31.33,5684664],[1734100200,31.63,31.7,29.95,30.75,7228792],[1734359400,30.78,34.43,30.49,33.4,7562032],[1734445800,33.0,33.0,29.14,29.34,7593474],[1734532200,28.94,30.0,26.99,27.09,8765094],[1734618600,27.74,28.16,25.98,27.05,6797748],[1734705000,26.49,28.76,26.0,26.71,5560013],[1734964200,27.04,28.73,25.77,28.64,5598973],[1735050600,28.77,28.96,27.37,28.25,2971650],[1735223400,28.3,29.39,27.32,28.06,3024481],[1735309800,27.94,28.0,25.53,27.31,5407527],[1735569000,26.95,27.2,25.9,26.92,3108440],[1735655400,27.39,28.68,26.79,27.7,3810398],[1735828200,28.13,30.58,28.13,30.51,6758876],[1735914600,30.52,31.54,29.1,31.18,4399814],[1736173800,31.96,33.18,30.7,31.22,5761491],[1736260200,32.37,34.1,30.58,31.54,8432299],[1736346600,31.35,31.74,29.58,30.74,4187126],[1736519400,29.9,33.98,29.01,33.18,7197793],[1736778600,32.26,36.0,31.1,35.72,11185495],[1736865000,35.27,37.33,34.73,36.89,10025461],[1736951400,37.53,39.38,35.58,37.02,10053286],[1737037800,37.1,38.47,35.8,37.59,5614892],[1737124200,38.35,38.39,35.61,36.04,4959412],[1737469800,36.14,37.8,34.6,37.6,6532179],[1737556200,38.4,40.96,37.9,39.52,10290132],[1737642600,38.37,40.04,37.62,38.64,7608877],[1737729000,39.37,43.66,39.25,41.69,14055909],[1737988200,33.5,33.59,24.41,26.08,44540490],[1738074600,28.2,30.24,26.7,30.09,22143820],[1738161000,29.55,31.34,28.96,29.73,12971489],[1738247400,31.2,33.4,30.66,31.8,11796622],[1738333800,32.41,34.59,31.92,32.66,11648141],[1738593000,29.97,34.13,29.6,33.31,11380034],[1738679400,34.1,34.97,33.01,34.5,7675034],[1738765800,34.8,35.51,33.57,33.93,6648700],[1738852200,34.0,34.86,32.63,34.55,8747396],[1738938600,35.34,39.5,34.91,38.13,17526616],[1739197800,38.81,41.3,38.7,40.97,12583276],[1739284200,40.11,42.44,39.96,41.42,9458545],[1739370600,39.66,40.63,38.92,39.3,9121613],[1739457000,40.19,41.83,38.68,41.7,8181320],[1739543400,45.0,47.68,41.65,44.49,35111374],[1739889000,47.27,50.87,46.74,48.07,28138365],[1739975400,47.2,47.93,44.5,44.83,18331342],[1740061800,40.04,48.63,38.5,46.25,36538275],[1740148200,45.48,45.8,39.5,39.84,22146998],[1740407400,37.9,38.18,34.03,36.22,21806763],[1740493800,35.2,36.48,32.73,34.21,14778951],[1740580200,35.98,37.92,35.13,35.98,12421155],[1740666600,37.7,38.05,31.71,32.05,16716347],[1740753000,30.87,33.57,30.25,32.49,11659643],[1741012200,32.8,33.18,27.59,28.1,18060713],[1741098600,27.5,30.92,26.21,29.61,18510264],[1741185000,30.96,31.18,29.32,30.17,12909233],[1741271400,27.77,28.47,26.25,26.8,17638076],[1741357800,26.93,28.35,26.2,27.99,11067866],[1741613400,27.35,27.58,24.86,26.21,15940164],[1741699800,26.5,26.73,24.36,25.45,12588729],[1741786200,26.56,28.5,25.7,28.4,19285884],[1741872600,27.98,28.5,26.03,26.17,9164506],[1741959000,26.91,28.81,26.85,28.75,10634579],[1742218200,28.99,29.13,27.1,28.29,8252840],[1742304600,27.77,28.01,25.62,25.67,9837818],[1742391000,26.1,28.2,25.97,27.58,10194352],[1742477400,27.0,28.38,25.95,26.18,9921196],[1742563800,25.81,27.0,25.54,26.98,6922708],[1742823000,27.77,29.54,27.65,29.19,10013760],[1742909400,29.0,29.35,26.91,27.17,10464612],[1742995800,26.63,26.7,23.84,24.71,19968596],[1743082200,23.4,25.7,23.05,25.41,15935172],[1743168600,24.76,25.0,21.75,22.31,24931529],[1743427800,21.11,21.8,20.72,21.11,13795042],[1743514200,21.66,22.75,20.62,22.69,15299499],[1743600600,22.13,24.72,22.09,24.45,18863683],[1743687000,21.6,23.1,21.53,21.77,11659279],[1743773400,20.78,21.1,18.98,20.29,14053016],[1744032600,18.74,21.9,18.31,21.05,12653701],[1744119000,22.52,22.75,19.66,20.06,11102224],[1744205400,20.52,24.0,18.89,23.46,17685383],[1744291800,22.77,22.82,20.41,21.04,8709488],[1744378200,21.0,21.66,20.26,21.51,5470245],[1744637400,22.32,22.78,20.51,20.73,6090954],[1744723800,21.31,21.58,20.8,21.33,4681536],[1744810200,20.63,21.3,20.51,21.08,4473320],[1744896600,21.32,21.85,21.02,21.53,3973038],[1745242200,21.24,21.35,20.25,20.72,4267868],[1745328600,21.15,22.04,21.02,21.86,4708692],[1745415000,23.25,23.79,22.55,22.96,7948988],[1745501400,23.09,24.62,22.93,24.46,5588660],[1745587800,24.57,25.08,23.86,24.48,5825710],[1745847000,24.2,24.6,23.31,24.11,3609706],[1745933400,24.11,24.41,23.7,23.86,3404823],[1746019800,22.5,22.8,21.45,22.73,6099431],[1746106200,25.02,25.71,23.92,23.93,7475342],[1746192600,24.65,25.62,24.39,25.4,6124608],[1746451800,24.6,24.66,23.73,23.8,4599858],[1746538200,23.3,25.07,23.25,25.04,6024079],[1746624600,27.55,27.87,26.26,27.45,17899382],[1746711000,27.84,28.59,27.3,28.22,6853824],[1746797400,28.35,29.08,27.2,28.27,8477340],[1747056600,32.32,33.73,31.13,33.34,16292632],[1747143000,33.34,35.98,32.88,35.27,13897455],[1747229400,35.67,36.65,34.45,36.12,12529740],[1747315800,35.07,36.79,34.88,35.79,11205645],[1747402200,36.34,38.14,36.19,37.32,16647174],[1747661400,35.8,37.93,35.68,37.56,11035773],[1747747800,38.12,41.45,36.42,39.14,31145816],[1747834200,38.7,41.4,38.25,38.92,17302414],[1747920600,39.04,39.55,37.0,37.8,10928706],[1748007000,36.2,39.2,35.8,38.59,10378906],[1748352600,39.57,40.09,38.03,39.82,9224286],[1748439000,40.15,40.9,38.7,39.6,7801825],[1748525400,41.25,41.8,37.6,38.04,11234109],[1748611800,37.47,38.18,36.01,36.75,8109474],[1748871000,34.83,36.04,34.72,36.02,17309160],[1748957400,36.66,37.98,35.72,37.27,12101564],[1749043800,37.94,40.4,37.12,39.39,14745612],[1749130200,41.42,49.73,41.4,46.3,59116979],[1749216600,46.3,48.57,45.41,48.28,19955731],[1749475800,50.27,55.04,49.54,52.58,33822167],[1749562200,51.0,52.59,49.15,52.51,21894621],[1749648600,52.52,53.26,49.83,50.57,14439358],[1749735000,50.27,51.97,48.82,50.28,12573598],[1749821400,48.64,49.73,46.88,47.13,14336538],[1750080600,48.0,51.82,47.89,50.46,14505281],[1750167000,49.85,50.06,47.66,48.33,11504780],[1750253400,48.62,50.35,47.69,48.32,10999792],[1750426200,48.66,49.74,46.88,47.97,12670677],[1750685400,47.0,48.3,45.02,47.48,12396039],[1750771800,49.0,53.0,48.98,51.02,18080885],[1750858200,53.27,54.59,48.05,48.52,14092802],[1750944600,49.57,53.16,48.54,52.6,11533054],[1751031000,53.01,53.42,50.6,51.84,8978070],[1751290200,53.34,55.75,52.15,55.33,13852466],[1751376600,54.6,55.38,49.77,50.31,14286389],[1751463000,50.26,51.2,48.88,49.97,8151086],[1751549400,50.99,50.99,49.8,50.25,5143329],[1751895000,49.33,49.33,47.22,47.84,9432634],[1751981400,48.1,48.55,46.65,47.1,8447779],[1752067800,47.4,48.8,45.81,46.05,10148670],[1752154200,46.5,47.23,45.25,46.43,8475988],[1752240600,46.52,47.6,43.89,44.3,9198213],[1752499800,48.93,52.21,48.8,51.95,24405126],[1752586200,52.33,55.43,51.02,53.53,18454809],[1752672600,53.58,53.65,50.12,53.31,11106696],[1752759000,53.81,56.16,52.71,53.69,10876380],[1752845400,54.65,54.8,51.01,52.79,9593830],[1753104600,53.71,58.16,51.88,52.37,19795712],[1753191000,52.15,52.3,49.0,51.01,9913873],[1753277400,51.2,52.04,50.44,51.88,7288526],[1753363800,53.28,53.78,51.02,52.16,7220664],[1753450200,52.52,52.76,51.32,51.37,6237591],[1753709400,51.69,52.8,50.55,52.75,8599545],[1753795800,53.29,54.7,50.0,50.4,10638297],[1753882200,50.88,52.5,50.25,51.29,8009413],[1753968600,53.33,57.13,52.9,54.43,22905485],[1754055000,51.97,53.73,50.1,52.0,11719087],[1754314200,52.99,54.53,52.88,54.17,7096068],[1754400600,55.84,56.45,53.54,55.17,8585128],[1754487000,55.89,55.89,53.95,55.09,9731086],[1754573400,64.37,70.54,63.38,65.31,44064989],[1754659800,68.17,71.49,66.45,68.78,18451904],[1754919000,69.9,75.96,69.16,70.24,21552712],[1755005400,73.42,75.92,72.0,75.33,16162726],[1755091800,75.08,75.21,69.08,70.63,18701875],[1755178200,69.75,71.52,67.1,68.46,13114024],[1755264600,68.3,71.97,67.31,71.62,9237569],[1755523800,71.44,72.59,68.27,72.54,10006986],[1755610200,71.75,71.75,66.2,67.19,12276289],[1755696600,65.19,67.5,62.01,67.47,14162843],[1755783000,68.26,68.26,65.45,66.18,8019247],[1755869400,65.51,69.68,64.61,68.98,11017169],[1756128600,69.46,70.74,67.25,70.02,7898724],[1756215000,70.29,72.8,69.31,70.48,7516543],[1756301400,71.5,71.8,68.65,70.1,6471437],[1756387800,70.93,73.5,70.2,72.04,8909357],[1756474200,71.55,71.69,67.6,68.32,7594332],[1756819800,65.9,67.88,64.11,65.72,9332965],[1756906200,66.88,67.0,64.83,65.65,6506241],[1756992600,65.44,66.5,64.41,64.91,5473282],[1757079000,66.5,67.39,63.26,65.47,5811679],[1757338200,64.67,66.64,63.8,64.06,23049975],[1757424600,97.2,98.68,86.12,95.72,88378298],[1757511000,91.64,100.51,91.0,93.39,44690602],[1757597400,92.67,93.87,88.42,89.19,37580632],[1757683800,91.19,92.0,86.78,90.41,22844686],[1757943000,92.61,94.42,88.84,90.96,19391494],[1758029400,91.2,91.3,88.02,89.43,11737329],[1758115800,91.67,95.0,88.83,94.08,24500303],[1758202200,95.08,97.68,92.03,94.12,18068457],[1758288600,94.14,99.55,93.25,99.31,18649279],[1758547800,101.95,108.58,98.52,106.6,24365232],[1758634200,108.04,109.98,104.25,107.8,16693468],[1758720600,109.14,114.85,104.85,113.23,25341223],[1758807000,108.06,114.08,105.88,107.94,19658801],[1758893400,109.93,109.99,102.8,107.7,14915089],[1759152600,109.38,112.52,108.33,110.22,12067011],[1759239000,113.44,117.65,111.66,112.27,20425090],[1759325400,111.72,115.88,109.76,115.61,12008096],[1759411800,123.77,126.74,118.57,125.87,26887671],[1759498200,127.23,132.98,123.6,127.98,21351332],[1759757400,132.4,135.76,124.93,124.94,16311053],[1759843800,127.83,128.28,115.72,117.7,19573994],[1759930200,121.2,125.31,117.5,122.0,18005901],[1760016600,120.98,133.32,119.87,132.64,18124575],[1760103000,134.95,141.1,128.01,129.58,28268503],[1760362200,135.21,138.53,132.65,135.46,12788929],[1760448600,132.0,133.78,125.75,128.15,13109232],[1760535000,131.9,131.99,122.2,125.83,11708320],[1760621400,128.09,130.97,122.02,123.04,14207745],[1760707800,118.06,120.57,110.88,113.44,21366533],[1760967000,116.79,117.47,107.51,109.0,17799474],[1761053400,107.88,108.18,101.4,104.28,18455857],[1761139800,106.67,107.8,94.63,98.62,26631501],[1761226200,100.33,106.62,99.46,106.16,15803826],[1761312600,111.16,117.45,110.01,117.26,17411914],[1761571800,120.91,126.5,120.11,125.43,16809794],[1761658200,126.44,129.03,120.78,121.83,13455547],[1761744600,124.28,125.95,117.5,125.1,13952790],[1761831000,121.2,128.44,117.76,124.18,12204384],[1761917400,126.64,132.15,126.3,130.82,13389040],[1762180200,134.0,134.93,119.75,120.47,17247025],[1762266600,112.36,116.78,109.0,110.54,17818197],[1762353000,113.64,118.21,111.43,117.0,13977675],[1762439400,119.55,121.0,108.41,109.44,17314423],[1762525800,104.5,111.3,101.26,111.28,17614072],[1762785000,115.18,118.37,108.72,109.95,21363592],[1762871400,114.13,114.56,99.83,102.22,45261131],[1762957800,104.2,105.65,91.71,94.36,35913483],[1763044200,90.89,91.48,84.5,88.63,41803017],[1763130600,82.36,89.0,82.0,83.54,31947972],[1763389800,83.82,89.65,83.59,85.98,23478713],[1763476200,83.78,93.69,81.71,90.54,26661640],[1763562600,93.0,96.72,91.8,95.07,22040586],[1763649000,99.43,102.69,84.21,84.64,35775660],[1763735400,85.55,88.74,78.21,83.26,34963167],[1763994600,86.23,93.0,85.15,91.9,51066797],[1764081000,89.29,91.28,84.72,88.88,15021195],[1764167400,93.85,95.63,90.76,94.69,13544965],[1764340200,96.55,97.08,93.44,94.87,6018834],[1764599400,91.45,101.6,89.01,100.15,14462853],[1764685800,100.36,102.95,96.06,96.45,11332667],[1764772200,95.02,99.06,91.0,98.92,11307490],[1764858600,99.07,103.84,97.47,102.8,11234128],[1764945000,100.34,101.35,96.2,98.04,13041137],[1765204200,97.29,100.5,95.3,100.33,8737775],[1765290600,98.09,100.88,96.1,96.41,10059983],[1765377000,95.73,97.09,92.2,93.59,10080735],[1765463400,89.2,95.45,86.7,94.28,11896082],[1765549800,93.31,95.65,86.2,87.69,14990621],[1765809000,88.1,88.24,80.06,81.14,17138596],[1765895400,79.58,81.56,76.88,80.95,13847810],[1765981800,84.09,84.3,75.25,75.45,17064073],[1766068200,79.05,80.35,77.01,78.09,10345822],[1766154600,80.65,90.54,80.16,89.46,17558701],[1766413800,92.97,95.9,91.1,93.23,11303103],[1766500200,90.31,92.97,88.31,90.03,8885717],[1766586600,90.23,91.42,88.65,91.13,3338007],[1766759400,91.51,91.62,86.74,87.59,6234606],[1767018600,84.45,88.61,84.29,86.04,8076086],[1767105000,86.38,86.96,84.56,85.17,5802313],[1767191400,85.37,86.47,82.9,83.7,7055872],[1767364200,86.98,90.76,86.01,89.95,9099505],[1767623400,95.0,95.44,90.89,92.83,10025590],[1767709800,95.72,100.68,90.94,100.24,18739584],[1767796200,99.01,102.35,95.56,96.21,10185837],[1767882600,96.79,102.54,96.02,97.3,12952014],[1767969000,98.89,104.97,97.1,97.93,11735268],[1768228200,98.32,108.68,96.55,107.33,16033466],[1768314600,107.33,107.95,103.92,105.43,10405206],[1768401000,105.78,106.7,99.38,101.98,10468048],[1768487400,104.56,108.13,101.1,103.89,11190850],[1768573800,106.0,110.5,100.71,108.73,15674397],[1768919400,101.83,104.47,98.34,99.29,16768594],[1769005800,101.09,102.4,93.1,98.87,15470530]];

// PortDive Brand Colors
const COLORS = {
  teal: '#1FA39B',
  coral: '#FF6B6B',
  brightTeal: '#00D9D9',
  candleGreen: '#2dd4bf',
  candleRed: '#fb7185',
  wickGreen: '#1ebfaa',
  wickRed: '#fa4d66',
  text: '#F5F5F5',
  textMuted: '#94a3b8',
  bgDark: '#0f172a',
  bgChart: '#1e293b',
  grid: '#334155'
};

export default function NBISElliottWaveChart() {
  const [hovered, setHovered] = useState(null);
  
  // Toggle states for overlays
  const [showMotiveWaves, setShowMotiveWaves] = useState(true);
  const [showMinorWaves, setShowMinorWaves] = useState(true);
  const [showAlt1, setShowAlt1] = useState(false);
  const [showAlt2, setShowAlt2] = useState(false);
  const [showFibRetracements, setShowFibRetracements] = useState(true);
  const [showFibExtensions, setShowFibExtensions] = useState(true);
  const [showInvalidation, setShowInvalidation] = useState(true);
  const [showTargetBand, setShowTargetBand] = useState(true);
  
  // Chart dimensions
  const W = 1200, H = 520;
  const M = { t: 40, r: 90, b: 60, l: 60 };
  const cW = W - M.l - M.r;
  const cH = H - M.t - M.b - 50;
  const vH = 40;
  
  // Filter data to the analysis range (Apr 2025 - Jan 2026)
  // Looking for timestamps around 2025-04-04 to 2026-01-21
  const analysisStartDate = new Date('2025-04-04').getTime() / 1000;
  const analysisEndDate = new Date('2026-01-22').getTime() / 1000;
  
  // Process and filter data
  const data = useMemo(() => {
    const allData = D.map(d => ({
      t: d[0], o: d[1], h: d[2], l: d[3], c: d[4], v: d[5],
      date: new Date(d[0] * 1000)
    }));
    
    // Filter to analysis range
    return allData.filter(d => d.t >= analysisStartDate && d.t <= analysisEndDate);
  }, []);
  
  // Price bounds from specification: $18.31 (low) → $141.10 (high)
  const pMin = 18.31 * 0.95;
  const pMax = 141.10 * 1.05;
  const vMax = Math.max(...data.map(d => d.v));
  
  const priceToY = p => M.t + cH * (1 - (p - pMin) / (pMax - pMin));
  const idxToX = i => M.l + (i + 0.5) * (cW / data.length);
  const candleW = Math.max(2, cW / data.length - 1);
  
  // Calculate Moving Averages
  const calcMA = (period) => {
    const allData = D.map(d => ({ t: d[0], c: d[4] }));
    const filteredIndices = [];
    const maValues = [];
    
    data.forEach((candle, idx) => {
      const globalIdx = D.findIndex(d => d[0] === candle.t);
      if (globalIdx >= period - 1) {
        let sum = 0;
        for (let i = globalIdx - period + 1; i <= globalIdx; i++) {
          sum += D[i][4];
        }
        maValues.push({ idx, ma: sum / period });
      }
    });
    return maValues;
  };
  
  const ma50 = useMemo(() => calcMA(50), [data]);
  const ma200 = useMemo(() => calcMA(200), [data]);
  
  // Wave pivot points - find actual candle indices
  const findCandleByDateAndPrice = (targetDate, targetPrice) => {
    const targetTime = new Date(targetDate).getTime() / 1000;
    let closest = 0;
    let minDiff = Infinity;
    data.forEach((d, i) => {
      const timeDiff = Math.abs(d.t - targetTime);
      if (timeDiff < minDiff) {
        minDiff = timeDiff;
        closest = i;
      }
    });
    return closest;
  };
  
  // Primary Wave Pivots from specification
  const wavePivots = useMemo(() => ({
    wave1Start: { idx: findCandleByDateAndPrice('2025-04-07', 18.31), price: 18.31, label: '(1) Start' },
    wave1Peak: { idx: findCandleByDateAndPrice('2025-06-30', 55.75), price: 55.75, label: '①' },
    wave2Low: { idx: findCandleByDateAndPrice('2025-07-11', 43.89), price: 43.89, label: '②' },
    wave3Peak: { idx: findCandleByDateAndPrice('2025-10-10', 141.10), price: 141.10, label: '③' },
    wave4Low: { idx: findCandleByDateAndPrice('2025-12-17', 75.25), price: 75.25, label: '④' },
    minorIPeak: { idx: findCandleByDateAndPrice('2026-01-16', 110.50), price: 110.50, label: 'i' },
    minorIILow: { idx: findCandleByDateAndPrice('2026-01-21', 93.10), price: 93.10, label: 'ii' },
  }), [data]);
  
  // Fibonacci Retracement levels (from Wave 3 to Wave 4)
  const fibRetraceLevels = useMemo(() => {
    const peak = 141.10;
    const low = 75.25;
    const range = peak - low;
    return [
      { ratio: 0, price: peak, label: '0%' },
      { ratio: 0.236, price: peak - range * 0.236, label: '23.6%' },
      { ratio: 0.382, price: peak - range * 0.382, label: '38.2%' },
      { ratio: 0.5, price: peak - range * 0.5, label: '50%' },
      { ratio: 0.618, price: peak - range * 0.618, label: '61.8%' },
      { ratio: 0.786, price: peak - range * 0.786, label: '78.6%' },
      { ratio: 1, price: low, label: '100%' },
    ];
  }, []);
  
  // Fibonacci Extension levels (Wave 5 targets)
  const fibExtensionLevels = useMemo(() => {
    const wave1Length = 55.75 - 18.31; // 37.44
    const wave4Low = 75.25;
    return [
      { ratio: 1.0, price: wave4Low + wave1Length * 1.0, label: '1.0×', opacity: 0.5 },
      { ratio: 1.272, price: wave4Low + wave1Length * 1.272, label: '1.272×', opacity: 0.45 },
      { ratio: 1.618, price: wave4Low + wave1Length * 1.618, label: '1.618×', opacity: 0.4, primary: true },
      { ratio: 2.0, price: wave4Low + wave1Length * 2.0, label: '2.0×', opacity: 0.35 },
      { ratio: 2.618, price: wave4Low + wave1Length * 2.618, label: '2.618×', opacity: 0.3 },
      { ratio: 3.618, price: wave4Low + wave1Length * 3.618, label: '3.618×', opacity: 0.2 },
    ];
  }, []);
  
  // Price grid levels
  const priceGrid = [20, 40, 60, 80, 100, 120, 140].filter(p => p >= pMin && p <= pMax);
  
  // Month markers
  const monthMarkers = useMemo(() => {
    const markers = [];
    let lastMonth = null;
    data.forEach((d, i) => {
      const month = d.date.getMonth();
      const year = d.date.getFullYear();
      if (month !== lastMonth) {
        markers.push({ i, month, year, label: d.date.toLocaleDateString('en-US', { month: 'short', year: '2-digit' }) });
        lastMonth = month;
      }
    });
    return markers;
  }, [data]);

  // Wave label component
  const WaveLabel = ({ x, y, label, color, size = 12, circled = false }) => (
    <g>
      {circled ? (
        <>
          <circle cx={x} cy={y} r={size * 0.8} fill="transparent" stroke={color} strokeWidth="1.5" />
          <text x={x} y={y + 4} textAnchor="middle" fill={color} fontSize={size} fontWeight="600" fontFamily="Inter, sans-serif">
            {label}
          </text>
        </>
      ) : (
        <text x={x} y={y} textAnchor="middle" fill={color} fontSize={size} fontWeight="600" fontFamily="Inter, sans-serif"
              style={{ textShadow: '0 0 3px #0f172a, 0 0 5px #0f172a' }}>
          {label}
        </text>
      )}
    </g>
  );

  const currentPrice = data[data.length - 1]?.c || 98.87;
  const lastCandle = data[data.length - 1];

  return (
    <div style={{ background: '#0a0f1a', padding: '16px', borderRadius: '12px', fontFamily: 'Inter, system-ui, sans-serif' }}>
      {/* Header */}
      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px', color: COLORS.text }}>
        <div>
          <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '8px' }}>
            <span style={{ color: COLORS.teal }}>NBIS</span> Elliott Wave Analysis
            <span style={{ fontSize: '12px', color: COLORS.textMuted, fontWeight: 400 }}>1D</span>
          </h2>
          <p style={{ margin: '4px 0 0', fontSize: '11px', color: COLORS.textMuted }}>
            Apr 2025 – Jan 2026 | Current: ${currentPrice.toFixed(2)} | ATH: $141.10
          </p>
        </div>
        
        {/* Data tooltip */}
        {hovered && (
          <div style={{ fontSize: '11px', background: '#1e293b', padding: '6px 12px', borderRadius: '6px', border: `1px solid ${COLORS.teal}33` }}>
            <span style={{ color: COLORS.textMuted }}>{hovered.date.toLocaleDateString()}</span>
            <span style={{ marginLeft: '12px' }}>O: ${hovered.o.toFixed(2)}</span>
            <span style={{ marginLeft: '8px', color: COLORS.candleGreen }}>H: ${hovered.h.toFixed(2)}</span>
            <span style={{ marginLeft: '8px', color: COLORS.candleRed }}>L: ${hovered.l.toFixed(2)}</span>
            <span style={{ marginLeft: '8px', color: hovered.c >= hovered.o ? COLORS.candleGreen : COLORS.candleRed }}>C: ${hovered.c.toFixed(2)}</span>
            <span style={{ marginLeft: '12px', color: COLORS.textMuted }}>{(hovered.v / 1e6).toFixed(1)}M</span>
          </div>
        )}
      </div>
      
      {/* Toggle Controls */}
      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginBottom: '12px' }}>
        {[
          { label: 'Motive Waves', state: showMotiveWaves, setter: setShowMotiveWaves, color: COLORS.teal },
          { label: 'Minor (i-ii-iii)', state: showMinorWaves, setter: setShowMinorWaves, color: COLORS.teal },
          { label: 'Alt #1 (A-B-C)', state: showAlt1, setter: setShowAlt1, color: COLORS.coral },
          { label: 'Alt #2 (Complex)', state: showAlt2, setter: setShowAlt2, color: '#94a3b8' },
          { label: 'Fib Retracements', state: showFibRetracements, setter: setShowFibRetracements, color: COLORS.teal },
          { label: 'Fib Extensions', state: showFibExtensions, setter: setShowFibExtensions, color: COLORS.brightTeal },
          { label: 'Invalidation $75.25', state: showInvalidation, setter: setShowInvalidation, color: COLORS.coral },
          { label: 'Target Band', state: showTargetBand, setter: setShowTargetBand, color: COLORS.teal },
        ].map(({ label, state, setter, color }) => (
          <button
            key={label}
            onClick={() => setter(!state)}
            style={{
              padding: '4px 10px',
              fontSize: '10px',
              fontWeight: 500,
              borderRadius: '4px',
              border: `1px solid ${state ? color : '#475569'}`,
              background: state ? `${color}22` : 'transparent',
              color: state ? color : COLORS.textMuted,
              cursor: 'pointer',
              transition: 'all 0.2s'
            }}
          >
            {label}
          </button>
        ))}
      </div>
      
      <svg width={W} height={H} style={{ background: COLORS.bgChart, borderRadius: '8px' }}>
        {/* Chart background */}
        <rect x={M.l} y={M.t} width={cW} height={cH} fill={COLORS.bgChart} />
        
        {/* Price grid lines */}
        {priceGrid.map(p => (
          <g key={p}>
            <line x1={M.l} x2={W - M.r} y1={priceToY(p)} y2={priceToY(p)} stroke={COLORS.grid} strokeWidth="0.5" />
            <text x={M.l - 8} y={priceToY(p) + 3} textAnchor="end" fill={COLORS.textMuted} fontSize="9">${p}</text>
          </g>
        ))}
        
        {/* Month markers */}
        {monthMarkers.map(({ i, label }) => (
          <g key={`${label}-${i}`}>
            <line x1={idxToX(i)} x2={idxToX(i)} y1={M.t} y2={H - M.b} stroke={COLORS.grid} strokeWidth="0.3" strokeDasharray="2,6" />
            <text x={idxToX(i)} y={H - M.b + 30} textAnchor="middle" fill={COLORS.textMuted} fontSize="9">{label}</text>
          </g>
        ))}
        
        {/* Fibonacci Retracement levels */}
        {showFibRetracements && fibRetraceLevels.map(({ ratio, price, label }) => {
          const y = priceToY(price);
          const isSolid = ratio === 0 || ratio === 1;
          const isKey = ratio === 0.618;
          return (
            <g key={label}>
              <line
                x1={M.l}
                x2={W - M.r}
                y1={y}
                y2={y}
                stroke={COLORS.teal}
                strokeWidth={isSolid ? 1 : 0.8}
                strokeDasharray={isSolid ? '' : '4,4'}
                opacity={isKey ? 0.7 : (isSolid ? 0.7 : 0.4)}
              />
              <text x={W - M.r + 5} y={y + 3} fill={COLORS.text} fontSize="8" opacity={0.8}>
                {label} | ${price.toFixed(2)}
              </text>
            </g>
          );
        })}
        
        {/* Fibonacci Extension levels */}
        {showFibExtensions && fibExtensionLevels.map(({ price, label, opacity, primary }) => {
          const y = priceToY(price);
          if (y < M.t - 30) return null; // Don't draw too far above chart
          return (
            <g key={label}>
              <line
                x1={M.l}
                x2={W - M.r}
                y1={y}
                y2={y}
                stroke={COLORS.brightTeal}
                strokeWidth={primary ? 1.5 : 0.8}
                strokeDasharray="6,4"
                opacity={opacity}
              />
              {y > M.t - 20 && (
                <text x={W - M.r + 5} y={y + 3} fill={COLORS.brightTeal} fontSize="8" opacity={0.9} fontWeight={primary ? 600 : 400}>
                  {label} | ${price.toFixed(2)}
                </text>
              )}
            </g>
          );
        })}
        
        {/* Target Band (135-141) */}
        {showTargetBand && (
          <rect
            x={M.l}
            y={priceToY(141)}
            width={cW}
            height={priceToY(135) - priceToY(141)}
            fill={COLORS.teal}
            opacity={0.08}
          />
        )}
        
        {/* Invalidation Line */}
        {showInvalidation && (
          <g>
            <line
              x1={M.l}
              x2={W - M.r}
              y1={priceToY(75.25)}
              y2={priceToY(75.25)}
              stroke={COLORS.coral}
              strokeWidth="1.5"
              strokeDasharray="8,4"
              opacity={0.8}
            />
            <text x={M.l + 5} y={priceToY(75.25) + 12} fill={COLORS.coral} fontSize="9" fontWeight="600">
              INVALIDATION $75.25
            </text>
          </g>
        )}
        
        {/* Moving Averages */}
        {ma50.length > 1 && (
          <path
            d={`M ${ma50.map(({ idx, ma }) => `${idxToX(idx)},${priceToY(ma)}`).join(' L ')}`}
            fill="none"
            stroke="#3b82f6"
            strokeWidth="1.5"
            opacity="0.7"
          />
        )}
        {ma200.length > 1 && (
          <path
            d={`M ${ma200.map(({ idx, ma }) => `${idxToX(idx)},${priceToY(ma)}`).join(' L ')}`}
            fill="none"
            stroke="#eab308"
            strokeWidth="1.5"
            opacity="0.7"
          />
        )}
        
        {/* Candlesticks */}
        {data.map((d, i) => {
          const x = idxToX(i);
          const isGreen = d.c >= d.o;
          const bodyColor = isGreen ? COLORS.candleGreen : COLORS.candleRed;
          const wickColor = isGreen ? COLORS.wickGreen : COLORS.wickRed;
          const yO = priceToY(d.o), yC = priceToY(d.c);
          const yH = priceToY(d.h), yL = priceToY(d.l);
          
          return (
            <g key={i} onMouseEnter={() => setHovered(d)} onMouseLeave={() => setHovered(null)} style={{ cursor: 'crosshair' }}>
              <line x1={x} y1={yH} x2={x} y2={yL} stroke={wickColor} strokeWidth={candleW < 2 ? 0.8 : 1} />
              <rect
                x={x - candleW / 2}
                y={Math.min(yO, yC)}
                width={candleW}
                height={Math.max(Math.abs(yC - yO), 1)}
                fill={bodyColor}
              />
            </g>
          );
        })}
        
        {/* Wave Connecting Lines - Primary Motive */}
        {showMotiveWaves && (
          <g>
            {/* Wave 1 Start to Wave 1 Peak */}
            <line
              x1={idxToX(wavePivots.wave1Start.idx)}
              y1={priceToY(wavePivots.wave1Start.price)}
              x2={idxToX(wavePivots.wave1Peak.idx)}
              y2={priceToY(wavePivots.wave1Peak.price)}
              stroke={COLORS.teal}
              strokeWidth="2"
              opacity="0.7"
            />
            {/* Wave 1 Peak to Wave 2 Low */}
            <line
              x1={idxToX(wavePivots.wave1Peak.idx)}
              y1={priceToY(wavePivots.wave1Peak.price)}
              x2={idxToX(wavePivots.wave2Low.idx)}
              y2={priceToY(wavePivots.wave2Low.price)}
              stroke={COLORS.teal}
              strokeWidth="2"
              opacity="0.7"
            />
            {/* Wave 2 Low to Wave 3 Peak */}
            <line
              x1={idxToX(wavePivots.wave2Low.idx)}
              y1={priceToY(wavePivots.wave2Low.price)}
              x2={idxToX(wavePivots.wave3Peak.idx)}
              y2={priceToY(wavePivots.wave3Peak.price)}
              stroke={COLORS.teal}
              strokeWidth="2"
              opacity="0.7"
            />
            {/* Wave 3 Peak to Wave 4 Low */}
            <line
              x1={idxToX(wavePivots.wave3Peak.idx)}
              y1={priceToY(wavePivots.wave3Peak.price)}
              x2={idxToX(wavePivots.wave4Low.idx)}
              y2={priceToY(wavePivots.wave4Low.price)}
              stroke={COLORS.teal}
              strokeWidth="2"
              opacity="0.7"
            />
            
            {/* Wave Labels */}
            <WaveLabel x={idxToX(wavePivots.wave1Peak.idx)} y={priceToY(wavePivots.wave1Peak.price) - 16} label="①" color={COLORS.teal} size={14} circled />
            <WaveLabel x={idxToX(wavePivots.wave2Low.idx)} y={priceToY(wavePivots.wave2Low.price) + 20} label="②" color={COLORS.teal} size={14} circled />
            <WaveLabel x={idxToX(wavePivots.wave3Peak.idx)} y={priceToY(wavePivots.wave3Peak.price) - 16} label="③" color={COLORS.teal} size={14} circled />
            <WaveLabel x={idxToX(wavePivots.wave4Low.idx)} y={priceToY(wavePivots.wave4Low.price) + 20} label="④" color={COLORS.teal} size={14} circled />
          </g>
        )}
        
        {/* Minor Waves (i, ii, iii projection) */}
        {showMinorWaves && (
          <g>
            {/* Wave 4 Low to Minor i Peak */}
            <line
              x1={idxToX(wavePivots.wave4Low.idx)}
              y1={priceToY(wavePivots.wave4Low.price)}
              x2={idxToX(wavePivots.minorIPeak.idx)}
              y2={priceToY(wavePivots.minorIPeak.price)}
              stroke={COLORS.teal}
              strokeWidth="1.5"
              strokeDasharray="4,2"
              opacity="0.8"
            />
            {/* Minor i Peak to Minor ii Low */}
            <line
              x1={idxToX(wavePivots.minorIPeak.idx)}
              y1={priceToY(wavePivots.minorIPeak.price)}
              x2={idxToX(wavePivots.minorIILow.idx)}
              y2={priceToY(wavePivots.minorIILow.price)}
              stroke={COLORS.teal}
              strokeWidth="1.5"
              strokeDasharray="4,2"
              opacity="0.8"
            />
            {/* Minor ii to current */}
            <line
              x1={idxToX(wavePivots.minorIILow.idx)}
              y1={priceToY(wavePivots.minorIILow.price)}
              x2={idxToX(data.length - 1)}
              y2={priceToY(currentPrice)}
              stroke={COLORS.teal}
              strokeWidth="1.5"
              strokeDasharray="4,2"
              opacity="0.8"
            />
            {/* Projection to target */}
            <line
              x1={idxToX(data.length - 1)}
              y1={priceToY(currentPrice)}
              x2={idxToX(data.length - 1) + 60}
              y2={priceToY(135.83)}
              stroke={COLORS.teal}
              strokeWidth="1"
              strokeDasharray="6,4"
              opacity="0.5"
            />
            
            {/* Minor wave labels */}
            <WaveLabel x={idxToX(wavePivots.minorIPeak.idx)} y={priceToY(wavePivots.minorIPeak.price) - 12} label="i" color={COLORS.teal} size={11} />
            <WaveLabel x={idxToX(wavePivots.minorIILow.idx)} y={priceToY(wavePivots.minorIILow.price) + 14} label="ii" color={COLORS.teal} size={11} />
            <WaveLabel x={idxToX(data.length - 1) + 50} y={priceToY(135.83) - 8} label="iii?" color={COLORS.teal} size={11} />
            <WaveLabel x={W - M.r + 40} y={priceToY(135.83) - 25} label="⑤" color={COLORS.teal} size={14} circled />
          </g>
        )}
        
        {/* Alternative Count #1 (A-B-C) */}
        {showAlt1 && (
          <g>
            {/* (A) down from Wave 3 to Wave 4 */}
            <line
              x1={idxToX(wavePivots.wave3Peak.idx)}
              y1={priceToY(wavePivots.wave3Peak.price)}
              x2={idxToX(wavePivots.wave4Low.idx)}
              y2={priceToY(wavePivots.wave4Low.price)}
              stroke={COLORS.coral}
              strokeWidth="2"
              opacity="0.7"
            />
            {/* (B) up to minor i peak */}
            <line
              x1={idxToX(wavePivots.wave4Low.idx)}
              y1={priceToY(wavePivots.wave4Low.price)}
              x2={idxToX(wavePivots.minorIPeak.idx)}
              y2={priceToY(wavePivots.minorIPeak.price)}
              stroke={COLORS.coral}
              strokeWidth="2"
              opacity="0.7"
            />
            {/* (C) projection down */}
            <line
              x1={idxToX(wavePivots.minorIPeak.idx)}
              y1={priceToY(wavePivots.minorIPeak.price)}
              x2={idxToX(data.length - 1) + 40}
              y2={priceToY(60)}
              stroke={COLORS.coral}
              strokeWidth="1.5"
              strokeDasharray="6,4"
              opacity="0.5"
            />
            {/* Arrow head for (C) */}
            <polygon
              points={`${idxToX(data.length - 1) + 35},${priceToY(62)} ${idxToX(data.length - 1) + 45},${priceToY(58)} ${idxToX(data.length - 1) + 40},${priceToY(60)}`}
              fill={COLORS.coral}
              opacity="0.5"
            />
            
            {/* Alt labels */}
            <text x={idxToX(wavePivots.wave4Low.idx) + 15} y={priceToY(wavePivots.wave4Low.price) + 5} fill={COLORS.coral} fontSize="11" fontWeight="600">(A)</text>
            <text x={idxToX(wavePivots.minorIPeak.idx) + 10} y={priceToY(wavePivots.minorIPeak.price) - 5} fill={COLORS.coral} fontSize="11" fontWeight="600">(B)</text>
            <text x={idxToX(data.length - 1) + 45} y={priceToY(60)} fill={COLORS.coral} fontSize="11" fontWeight="600">(C)?</text>
          </g>
        )}
        
        {/* Alternative Count #2 (Complex Wave 4) */}
        {showAlt2 && (
          <g>
            <text x={idxToX(wavePivots.wave4Low.idx)} y={priceToY(wavePivots.wave4Low.price) + 35} fill="#94a3b8" fontSize="9" opacity="0.7">
              (W)-(X)-(Y)?
            </text>
            <line
              x1={idxToX(wavePivots.wave3Peak.idx) + 20}
              x2={idxToX(wavePivots.wave4Low.idx) - 20}
              y1={priceToY(100)}
              y2={priceToY(100)}
              stroke="#94a3b8"
              strokeWidth="1"
              strokeDasharray="3,3"
              opacity="0.4"
            />
          </g>
        )}
        
        {/* Volume bars */}
        <rect x={M.l} y={H - M.b - vH - 5} width={cW} height={vH} fill={COLORS.bgDark} />
        {data.map((d, i) => {
          const x = idxToX(i);
          const h = (d.v / vMax) * vH * 0.85;
          const color = d.c >= d.o ? COLORS.candleGreen : COLORS.candleRed;
          return <rect key={i} x={x - candleW / 2} y={H - M.b - h - 5} width={candleW} height={h} fill={color} opacity="0.35" />;
        })}
        
        {/* Current price marker */}
        {lastCandle && (
          <g>
            <line
              x1={W - M.r - 30}
              x2={W - M.r}
              y1={priceToY(currentPrice)}
              y2={priceToY(currentPrice)}
              stroke={currentPrice >= lastCandle.o ? COLORS.candleGreen : COLORS.candleRed}
              strokeDasharray="2,2"
            />
            <rect
              x={W - M.r + 2}
              y={priceToY(currentPrice) - 10}
              width={50}
              height={20}
              rx="4"
              fill={currentPrice >= lastCandle.o ? COLORS.candleGreen : COLORS.candleRed}
            />
            <text x={W - M.r + 27} y={priceToY(currentPrice) + 4} textAnchor="middle" fill="white" fontSize="10" fontWeight="600">
              ${currentPrice.toFixed(2)}
            </text>
          </g>
        )}
        
        {/* MA Legend */}
        <g transform={`translate(${M.l + 10}, ${M.t + 10})`}>
          <line x1="0" y1="0" x2="15" y2="0" stroke="#3b82f6" strokeWidth="2" />
          <text x="20" y="3" fill={COLORS.textMuted} fontSize="9">50-MA</text>
          <line x1="55" y1="0" x2="70" y2="0" stroke="#eab308" strokeWidth="2" />
          <text x="75" y="3" fill={COLORS.textMuted} fontSize="9">200-MA</text>
        </g>
      </svg>
      
      {/* Legend */}
      <div style={{
        marginTop: '12px',
        padding: '10px 14px',
        background: '#0f172a',
        borderRadius: '8px',
        border: `1px solid ${COLORS.teal}33`,
        display: 'flex',
        gap: '24px',
        flexWrap: 'wrap',
        fontSize: '10px'
      }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
          <div style={{ width: '12px', height: '3px', background: COLORS.teal, borderRadius: '2px' }} />
          <span style={{ color: COLORS.teal, fontWeight: 600 }}>Primary (60%)</span>
          <span style={{ color: COLORS.textMuted }}>Wave (5) in progress</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
          <div style={{ width: '12px', height: '3px', background: COLORS.coral, borderRadius: '2px' }} />
          <span style={{ color: COLORS.coral, fontWeight: 600 }}>Alt #1 (30%)</span>
          <span style={{ color: COLORS.textMuted }}>A-B-C Correction</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
          <div style={{ width: '12px', height: '3px', background: '#94a3b8', borderRadius: '2px' }} />
          <span style={{ color: '#94a3b8', fontWeight: 600 }}>Alt #2 (10%)</span>
          <span style={{ color: COLORS.textMuted }}>Complex (4)</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
          <div style={{ width: '12px', height: '3px', background: COLORS.brightTeal, borderRadius: '2px', opacity: 0.6 }} />
          <span style={{ color: COLORS.brightTeal }}>Extensions</span>
        </div>
        <div style={{ marginLeft: 'auto', color: COLORS.textMuted }}>
          <span style={{ color: COLORS.text }}>Target:</span> $135.83 (1.618×) | <span style={{ color: COLORS.coral }}>Invalidation:</span> $75.25
        </div>
      </div>
      
      <div style={{ marginTop: '8px', fontSize: '10px', color: COLORS.textMuted, textAlign: 'center' }}>
        PortDive Elliott Wave Analysis • {data.length} daily candles rendered • Hover for details
      </div>
    </div>
  );
}
